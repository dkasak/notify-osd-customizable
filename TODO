TODO
 * remove the bubble->visible attribute and turn the method calls into gdk_window_is_visible